{"ast":null,"code":"var _jsxFileName = \"D:\\\\IaaC\\\\DataVis\\\\data_vis_project\\\\code\\\\interactive-map\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport Container from './Container';\nimport MapContainer from './MapContainer';\nimport PromptBox from './PromptBox';\nimport AnalyticsPanel from './AnalyticsPanel';\nimport Input from './Input';\nimport Button from './Button';\nimport LoadingMessage from './LoadingMessage';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [prompt, setPrompt] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [mapHTML, setMapHTML] = useState(\"http://127.0.0.1:5000/maps/filtered_map.html\");\n  const [mapLoading, setMapLoading] = useState(false);\n  const [mapError, setMapError] = useState(null);\n  const [analytics, setAnalytics] = useState({\n    summary: '',\n    count: 0\n  });\n  const handlePromptSubmit = async () => {\n    if (!prompt.trim()) return;\n    setLoading(true);\n    setMapLoading(true);\n    setMapError(null);\n    try {\n      const response = await fetch('http://127.0.0.1:5000/process-prompt', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          prompt: prompt.trim()\n        })\n      });\n      const data = await response.json();\n      if (data.error) {\n        console.error('Error:', data.error);\n        setMapError(data.error);\n        setLoading(false);\n        setMapLoading(false);\n        return;\n      }\n      setAnalytics({\n        summary: data.summary,\n        count: data.count\n      });\n\n      // Wait a short moment to ensure the map file is ready\n      await new Promise(resolve => setTimeout(resolve, 500));\n\n      // Update map URL with timestamp to force refresh\n      const timestamp = Date.now();\n      const newMapUrl = `http://127.0.0.1:5000/maps/${data.filteredMap}?t=${timestamp}`;\n      setMapHTML(newMapUrl);\n    } catch (error) {\n      console.error('Error:', error);\n      setMapError('Failed to process request');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      handlePromptSubmit();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(MapContainer, {\n      children: [/*#__PURE__*/_jsxDEV(\"iframe\", {\n        src: mapHTML,\n        title: \"Interactive Map\",\n        style: {\n          width: \"100%\",\n          height: \"100vh\",\n          border: \"none\",\n          display: mapLoading ? \"none\" : \"block\"\n        },\n        onLoad: () => {\n          console.log(\"Map iframe loaded\");\n          setMapLoading(false);\n        },\n        onError: e => {\n          console.error(\"Map iframe error:\", e);\n          setMapError('Failed to display map');\n          setMapLoading(false);\n        }\n      }, mapHTML, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), mapLoading && /*#__PURE__*/_jsxDEV(LoadingMessage, {\n        children: \"Loading map...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this), mapError && /*#__PURE__*/_jsxDEV(LoadingMessage, {\n        style: {\n          color: '#e53e3e'\n        },\n        children: mapError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PromptBox, {\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        type: \"text\",\n        value: prompt,\n        onChange: e => setPrompt(e.target.value),\n        onKeyPress: handleKeyPress,\n        placeholder: \"Enter your search query...\",\n        disabled: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handlePromptSubmit,\n        disabled: loading,\n        children: loading ? 'Searching...' : 'Search'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AnalyticsPanel, {\n      children: [analytics.summary && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: '0 0 10px 0',\n            color: '#2d3748'\n          },\n          children: \"Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#4a5568'\n          },\n          children: analytics.summary\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), analytics.count > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#4a5568'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Results:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this), \" \", analytics.count, \" matches found\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"BXKOn20Ld32DPdXpWCvxCaV/AQM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","Container","MapContainer","PromptBox","AnalyticsPanel","Input","Button","LoadingMessage","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","prompt","setPrompt","loading","setLoading","mapHTML","setMapHTML","mapLoading","setMapLoading","mapError","setMapError","analytics","setAnalytics","summary","count","handlePromptSubmit","trim","response","fetch","method","headers","body","JSON","stringify","data","json","error","console","Promise","resolve","setTimeout","timestamp","Date","now","newMapUrl","filteredMap","handleKeyPress","e","key","children","src","title","style","width","height","border","display","onLoad","log","onError","fileName","_jsxFileName","lineNumber","columnNumber","color","type","value","onChange","target","onKeyPress","placeholder","disabled","onClick","margin","_c","$RefreshReg$"],"sources":["D:/IaaC/DataVis/data_vis_project/code/interactive-map/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport Container from './Container';\r\nimport MapContainer from './MapContainer';\r\nimport PromptBox from './PromptBox';\r\nimport AnalyticsPanel from './AnalyticsPanel';\r\nimport Input from './Input';\r\nimport Button from './Button';\r\nimport LoadingMessage from './LoadingMessage';\r\n\r\nfunction App() {\r\n  const [prompt, setPrompt] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [mapHTML, setMapHTML] = useState(\"http://127.0.0.1:5000/maps/filtered_map.html\");\r\n  const [mapLoading, setMapLoading] = useState(false);\r\n  const [mapError, setMapError] = useState(null);\r\n  const [analytics, setAnalytics] = useState({\r\n    summary: '',\r\n    count: 0\r\n  });\r\n\r\n  const handlePromptSubmit = async () => {\r\n    if (!prompt.trim()) return;\r\n    \r\n    setLoading(true);\r\n    setMapLoading(true);\r\n    setMapError(null);\r\n    \r\n    try {\r\n      const response = await fetch('http://127.0.0.1:5000/process-prompt', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ prompt: prompt.trim() })\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (data.error) {\r\n        console.error('Error:', data.error);\r\n        setMapError(data.error);\r\n        setLoading(false);\r\n        setMapLoading(false);\r\n        return;\r\n      }\r\n\r\n      setAnalytics({\r\n        summary: data.summary,\r\n        count: data.count\r\n      });\r\n\r\n      // Wait a short moment to ensure the map file is ready\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n\r\n      // Update map URL with timestamp to force refresh\r\n      const timestamp = Date.now();\r\n      const newMapUrl = `http://127.0.0.1:5000/maps/${data.filteredMap}?t=${timestamp}`;\r\n      setMapHTML(newMapUrl);\r\n      \r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setMapError('Failed to process request');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handlePromptSubmit();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <MapContainer>\r\n        <iframe\r\n          key={mapHTML}\r\n          src={mapHTML}\r\n          title=\"Interactive Map\"\r\n          style={{\r\n            width: \"100%\",\r\n            height: \"100vh\",\r\n            border: \"none\",\r\n            display: mapLoading ? \"none\" : \"block\"\r\n          }}\r\n          onLoad={() => {\r\n            console.log(\"Map iframe loaded\");\r\n            setMapLoading(false);\r\n          }}\r\n          onError={(e) => {\r\n            console.error(\"Map iframe error:\", e);\r\n            setMapError('Failed to display map');\r\n            setMapLoading(false);\r\n          }}\r\n        />\r\n        {mapLoading && (\r\n          <LoadingMessage>Loading map...</LoadingMessage>\r\n        )}\r\n        {mapError && (\r\n          <LoadingMessage style={{ color: '#e53e3e' }}>{mapError}</LoadingMessage>\r\n        )}\r\n      </MapContainer>\r\n\r\n      <PromptBox>\r\n        <Input\r\n          type=\"text\"\r\n          value={prompt}\r\n          onChange={(e) => setPrompt(e.target.value)}\r\n          onKeyPress={handleKeyPress}\r\n          placeholder=\"Enter your search query...\"\r\n          disabled={loading}\r\n        />\r\n        <Button onClick={handlePromptSubmit} disabled={loading}>\r\n          {loading ? 'Searching...' : 'Search'}\r\n        </Button>\r\n      </PromptBox>\r\n      \r\n      <AnalyticsPanel>\r\n        {analytics.summary && (\r\n          <>\r\n            <h3 style={{ margin: '0 0 10px 0', color: '#2d3748' }}>Summary</h3>\r\n            <p style={{ color: '#4a5568' }}>{analytics.summary}</p>\r\n          </>\r\n        )}\r\n        \r\n        {analytics.count > 0 && (\r\n          <p style={{ color: '#4a5568' }}>\r\n            <strong>Results:</strong> {analytics.count} matches found\r\n          </p>\r\n        )}\r\n      </AnalyticsPanel>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}