{"ast":null,"code":"var _jsxFileName = \"D:\\\\IaaC\\\\DataVis\\\\data_vis_project\\\\code\\\\interactive-map\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, GlobalStyle, MapContainer, PromptContainer, TextArea, GenerateButton, LoadingMessage } from './style.js';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [prompt, setPrompt] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [mapHTML, setMapHTML] = useState(\"http://127.0.0.1:5000/maps/filtered_map.html\");\n  useEffect(() => {\n    const handleResize = () => {\n      const iframe = document.querySelector('iframe');\n      if (iframe) {\n        iframe.contentWindow.postMessage('resize', '*');\n      }\n    };\n\n    // Initial resize\n    const timer = setTimeout(handleResize, 100);\n\n    // Add resize listener\n    window.addEventListener('resize', handleResize);\n\n    // Cleanup\n    return () => {\n      clearTimeout(timer);\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [mapHTML]);\n  const handlePromptSubmit = async () => {\n    if (!prompt.trim()) return;\n    setLoading(true);\n    try {\n      const response = await fetch(\"http://127.0.0.1:5000/process-prompt\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          prompt\n        })\n      });\n      const data = await response.json();\n      if (data.error) {\n        console.error(\"Server Error:\", data.error);\n        return;\n      }\n      const newMapUrl = `http://127.0.0.1:5000/maps/filtered_map.html?t=${new Date().getTime()}`;\n      setMapHTML(\"\");\n      setTimeout(() => {\n        setMapHTML(newMapUrl);\n      }, 50);\n    } catch (error) {\n      console.error(\"Error:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(GlobalStyle, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      style: {\n        margin: 0,\n        padding: 0,\n        overflow: 'hidden',\n        position: 'fixed',\n        width: '100vw',\n        height: '100vh',\n        top: 0,\n        left: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(MapContainer, {\n        style: {\n          margin: 0,\n          padding: 0,\n          width: '100vw',\n          height: '100vh',\n          position: 'absolute',\n          top: 0,\n          left: 0\n        },\n        children: loading ? /*#__PURE__*/_jsxDEV(LoadingMessage, {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"iframe\", {\n          src: mapHTML,\n          title: \"Interactive Map\",\n          style: {\n            margin: 0,\n            padding: 0,\n            width: '100%',\n            height: '100%',\n            border: 'none',\n            position: 'absolute',\n            top: 0,\n            left: 0\n          },\n          onLoad: e => {\n            setTimeout(() => {\n              e.target.contentWindow.postMessage('resize', '*');\n            }, 100);\n          }\n        }, mapHTML, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PromptContainer, {\n        style: {\n          position: \"fixed\",\n          bottom: \"2rem\",\n          left: \"50%\",\n          transform: \"translateX(-50%)\",\n          display: \"flex\",\n          gap: \"1rem\",\n          padding: \"1rem\",\n          background: \"rgba(255, 255, 255, 0.9)\",\n          borderRadius: \"8px\",\n          boxShadow: \"0 4px 6px rgba(0, 0, 0, 0.1)\",\n          zIndex: 1000\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextArea, {\n          placeholder: \"Enter your search query...\",\n          value: prompt,\n          onChange: e => setPrompt(e.target.value),\n          onKeyPress: e => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n              e.preventDefault();\n              handlePromptSubmit();\n            }\n          },\n          style: {\n            width: \"400px\",\n            padding: \"0.5rem\",\n            borderRadius: \"4px\",\n            border: \"1px solid #ccc\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(GenerateButton, {\n          onClick: handlePromptSubmit,\n          style: {\n            padding: \"0.5rem 1rem\",\n            borderRadius: \"4px\",\n            background: \"#3e5caa\",\n            color: \"white\",\n            border: \"none\",\n            cursor: \"pointer\"\n          },\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(App, \"snGBIZr98JJC4LmLN4EVQLkWqQQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Container","GlobalStyle","MapContainer","PromptContainer","TextArea","GenerateButton","LoadingMessage","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","prompt","setPrompt","loading","setLoading","mapHTML","setMapHTML","handleResize","iframe","document","querySelector","contentWindow","postMessage","timer","setTimeout","window","addEventListener","clearTimeout","removeEventListener","handlePromptSubmit","trim","response","fetch","method","headers","body","JSON","stringify","data","json","error","console","newMapUrl","Date","getTime","children","fileName","_jsxFileName","lineNumber","columnNumber","style","margin","padding","overflow","position","width","height","top","left","src","title","border","onLoad","e","target","bottom","transform","display","gap","background","borderRadius","boxShadow","zIndex","placeholder","value","onChange","onKeyPress","key","shiftKey","preventDefault","onClick","color","cursor","_c","$RefreshReg$"],"sources":["D:/IaaC/DataVis/data_vis_project/code/interactive-map/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n    Container,\n    GlobalStyle,\n    MapContainer,\n    PromptContainer,\n    TextArea,\n    GenerateButton,\n    LoadingMessage\n} from './style.js';\n\nfunction App() {\n    const [prompt, setPrompt] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [mapHTML, setMapHTML] = useState(\"http://127.0.0.1:5000/maps/filtered_map.html\");\n\n    useEffect(() => {\n        const handleResize = () => {\n            const iframe = document.querySelector('iframe');\n            if (iframe) {\n                iframe.contentWindow.postMessage('resize', '*');\n            }\n        };\n\n        // Initial resize\n        const timer = setTimeout(handleResize, 100);\n        \n        // Add resize listener\n        window.addEventListener('resize', handleResize);\n        \n        // Cleanup\n        return () => {\n            clearTimeout(timer);\n            window.removeEventListener('resize', handleResize);\n        };\n    }, [mapHTML]);\n\n    const handlePromptSubmit = async () => {\n        if (!prompt.trim()) return;\n        \n        setLoading(true);\n        \n        try {\n            const response = await fetch(\"http://127.0.0.1:5000/process-prompt\", {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({ prompt }),\n            });\n\n            const data = await response.json();\n            if (data.error) {\n                console.error(\"Server Error:\", data.error);\n                return;\n            }\n\n            const newMapUrl = `http://127.0.0.1:5000/maps/filtered_map.html?t=${new Date().getTime()}`;\n            setMapHTML(\"\");\n            setTimeout(() => {\n                setMapHTML(newMapUrl);\n            }, 50);\n\n        } catch (error) {\n            console.error(\"Error:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <>\n            <GlobalStyle />\n            <Container style={{ \n                margin: 0,\n                padding: 0,\n                overflow: 'hidden',\n                position: 'fixed',\n                width: '100vw',\n                height: '100vh',\n                top: 0,\n                left: 0\n            }}>\n                <MapContainer style={{ \n                    margin: 0,\n                    padding: 0,\n                    width: '100vw',\n                    height: '100vh',\n                    position: 'absolute',\n                    top: 0,\n                    left: 0\n                }}>\n                    {loading ? (\n                        <LoadingMessage>Loading...</LoadingMessage>\n                    ) : (\n                        <iframe\n                            key={mapHTML}\n                            src={mapHTML}\n                            title=\"Interactive Map\"\n                            style={{\n                                margin: 0,\n                                padding: 0,\n                                width: '100%',\n                                height: '100%',\n                                border: 'none',\n                                position: 'absolute',\n                                top: 0,\n                                left: 0\n                            }}\n                            onLoad={(e) => {\n                                setTimeout(() => {\n                                    e.target.contentWindow.postMessage('resize', '*');\n                                }, 100);\n                            }}\n                        />\n                    )}\n                </MapContainer>\n\n                <PromptContainer\n                    style={{\n                        position: \"fixed\",\n                        bottom: \"2rem\",\n                        left: \"50%\",\n                        transform: \"translateX(-50%)\",\n                        display: \"flex\",\n                        gap: \"1rem\",\n                        padding: \"1rem\",\n                        background: \"rgba(255, 255, 255, 0.9)\",\n                        borderRadius: \"8px\",\n                        boxShadow: \"0 4px 6px rgba(0, 0, 0, 0.1)\",\n                        zIndex: 1000\n                    }}\n                >\n                    <TextArea \n                        placeholder=\"Enter your search query...\" \n                        value={prompt}\n                        onChange={(e) => setPrompt(e.target.value)}\n                        onKeyPress={(e) => {\n                            if (e.key === 'Enter' && !e.shiftKey) {\n                                e.preventDefault();\n                                handlePromptSubmit();\n                            }\n                        }}\n                        style={{\n                            width: \"400px\",\n                            padding: \"0.5rem\",\n                            borderRadius: \"4px\",\n                            border: \"1px solid #ccc\"\n                        }}\n                    />\n                    <GenerateButton \n                        onClick={handlePromptSubmit}\n                        style={{\n                            padding: \"0.5rem 1rem\",\n                            borderRadius: \"4px\",\n                            background: \"#3e5caa\",\n                            color: \"white\",\n                            border: \"none\",\n                            cursor: \"pointer\"\n                        }}\n                    >\n                        Search\n                    </GenerateButton>\n                </PromptContainer>\n            </Container>\n        </>\n    );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}